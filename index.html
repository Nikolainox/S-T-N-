<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Biological Close</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="app">
    <header class="top">
      <div class="row">
        <button class="nav" id="btnYesterday" aria-label="Yesterday">Yesterday</button>
        <div class="center">
          <div class="title" id="dateTitle">Today</div>
          <div class="sub" id="dateSub"></div>
        </div>
        <button class="nav" id="btnToday" aria-label="Today">Today</button>
      </div>

      <div class="row">
        <button class="pill" id="btnExp" aria-label="Experiment">
          <span class="pillK">EXP</span>
          <span class="pillV" id="expText">—</span>
        </button>
        <button class="ghost" id="btnReview" aria-label="Review">Review</button>
        <button class="ghost" id="btnDiag" aria-label="Diagnostics">Diag</button>
      </div>
    </header>

    <section class="card">
      <div class="k">Quarter</div>
      <div class="grid4" id="quarterGrid">
        <button class="btn" data-quarter="Q1">Q1</button>
        <button class="btn" data-quarter="Q2">Q2</button>
        <button class="btn" data-quarter="Q3">Q3</button>
        <button class="btn" data-quarter="Q4">Q4</button>
      </div>
      <div class="hint" id="quarterHint">Select quarter with one tap.</div>
    </section>

    <section class="card">
      <div class="k">Events</div>
      <div class="grid3" id="eventGrid">
        <button class="btn" data-evt="MIND">MIND</button>
        <button class="btn" data-evt="DEEP">DEEP</button>
        <button class="btn" data-evt="BODY">BODY</button>
        <button class="btn" data-evt="FOOD">FOOD</button>
        <button class="btn" data-evt="REST">REST</button>
        <button class="btn bad" data-evt="BAD">BAD</button>
      </div>

      <div class="row">
        <button class="ctrl" id="btnUndo">Undo</button>
        <button class="ctrl primary" id="btnFinalize">Finalize</button>
      </div>

      <div class="row slim">
        <div class="status" id="statusText" aria-live="polite"></div>
        <div class="caps" id="capsText"></div>
      </div>
    </section>

    <section class="card">
      <div class="k">Close</div>
      <div class="box">
        <div class="line"><span class="lab">WHAT WORKED</span><span class="val" id="lineWorked">—</span></div>
        <div class="line"><span class="lab">WHAT HURT</span><span class="val" id="lineHurt">—</span></div>
        <div class="line"><span class="lab">TOMORROW</span><span class="val" id="lineTomorrow">—</span></div>
      </div>
      <div class="hint" id="lockHint"></div>
    </section>
  </main>

  <!-- REVIEW -->
  <div class="overlay hidden" id="ovReview">
    <div class="sheet" role="dialog" aria-modal="true">
      <div class="row">
        <div class="sheetTitle">Review · last 7 finalized</div>
        <button class="ghost" id="btnCloseReview">Close</button>
      </div>
      <div class="box">
        <div class="line"><span class="lab">WHAT WORKED</span><span class="val" id="rWorked">—</span></div>
        <div class="line"><span class="lab">WHAT HURT</span><span class="val" id="rHurt">—</span></div>
        <div class="line"><span class="lab">TOMORROW</span><span class="val" id="rTomorrow">—</span></div>
      </div>
      <div class="hint">No charts. No guilt. Just a close.</div>
    </div>
  </div>

  <!-- EXP -->
  <div class="overlay hidden" id="ovExp">
    <div class="sheet" role="dialog" aria-modal="true">
      <div class="row">
        <div class="sheetTitle">Experiment (tap-only)</div>
        <button class="ghost" id="btnCloseExp">Close</button>
      </div>
      <div class="hint tight">Pick a name (1 tap). Start = tomorrow if you reset. No typing.</div>
      <div class="grid2" id="expGrid">
        <button class="btn" data-exp="Strength Block">Strength Block</button>
        <button class="btn" data-exp="Hypertrophy Block">Hypertrophy Block</button>
        <button class="btn" data-exp="Cut / Recomp">Cut / Recomp</button>
        <button class="btn" data-exp="Peaking">Peaking</button>
        <button class="btn" data-exp="Skill / Technique">Skill / Technique</button>
        <button class="btn" data-exp="Recovery Block">Recovery Block</button>
      </div>
      <div class="row">
        <button class="ctrl danger" id="btnClearExp">Clear EXP</button>
      </div>
      <div class="hint">Clearing EXP does not touch day data.</div>
    </div>
  </div>

  <!-- DIAG -->
  <div class="overlay hidden" id="ovDiag">
    <div class="sheet" role="dialog" aria-modal="true">
      <div class="row">
        <div class="sheetTitle">Diagnostics</div>
        <button class="ghost" id="btnCloseDiag">Close</button>
      </div>

      <div class="box">
        <div class="line"><span class="lab">GHOST ↔ PRESENCE</span><span class="val" id="dLabel">—</span></div>
      </div>

      <pre class="pre" id="dBar"></pre>

      <div class="row">
        <button class="ctrl" id="btnRunMC">Monte Carlo (90d)</button>
        <button class="ctrl danger" id="btnResetTomorrow">Reset for Tomorrow</button>
      </div>

      <div class="hint">
        Reset for Tomorrow clears only this app’s storage and sets the experiment start date to tomorrow.
        Monte Carlo is just a rough expectation lens (not biology).
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>

  <script src="app.js"></script>
</body>
</html>
